<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silver Prices</title>
    <link rel="stylesheet" href="css.css">
    <link rel="icon" type="image/png" href="silver.png">
    <style>
        .tradingview-widget-container {
            margin: 15px auto;
            width: 98%;
            height: 75vh;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .metal-page {
            padding: 10px 10px;
            height: 100vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }
        
        .metal-box {
            margin-bottom: 10px;
            flex-shrink: 0;
        }
        
        .page-header {
            flex-shrink: 0;
        }
        
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        
        footer {
            flex-shrink: 0;
        }
        
        /* Live Price Ticker Styles */
        .live-price-ticker {
            margin-left: auto;
            margin-right: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(192, 192, 192, 0.3);
        }
        
        .ticker-price {
            font-weight: bold;
            color: #C0C0C0;
            font-size: 14px;
        }
        
        .ticker-change {
            font-size: 12px;
            margin-left: 8px;
        }
        
        .positive {
            color: #4CAF50;
        }
        
        .negative {
            color: #f44336;
        }
        
        .ticker-label {
            font-size: 12px;
            opacity: 0.8;
            margin-right: 8px;
        }
        
        .loading {
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <!-- Dark Mode Button -->
    <button id="darkModeToggle">ðŸŒ™ Dark Mode</button>

    <header>
        <h1>Silver Prices</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="gold.html">Gold</a>
            <a href="silver.html" class="active">Silver</a>
            <a href="bitcoin.html">Bitcoin</a>
            <!-- Live Price Ticker -->
            <div class="live-price-ticker">
                <span class="ticker-label">SILVER:</span>
                <span class="ticker-price loading">Loading...</span>
                <span class="ticker-change">-</span>
            </div>
        </nav>
    </header>

    <section class="metal-page">
        <div class="page-header">
            <h2>Live Silver Price</h2>
            <p>Real-time silver prices with RSI technical analysis</p>
        </div>

        <div class="metal-box silver-box">
            <h3>Silver (XAG)</h3>
            <p class="price loading">Loading live price...</p>
        </div>

        <!-- TradingView Widget with Corrected Symbol -->
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
            {
                "interval": "1h",
                "width": "100%",
                "height": "100%",
                "symbol": "TVC:SILVER",
                "showIntervalTabs": true,
                "displayMode": "single",
                "locale": "en",
                "colorTheme": "light",
                "isTransparent": false
            }
            </script>
        </div>
    </section>

    <footer>
        Â© 2025 FinancePro â€” All Rights Reserved
    </footer>

    <!-- DARK MODE & LIVE PRICE SCRIPTS -->
    <script>
        // Dark Mode Toggle
        const darkModeToggle = document.getElementById("darkModeToggle");
        
        darkModeToggle.onclick = function() {
            document.body.classList.toggle("dark");
            
            // Update button text
            if (document.body.classList.contains("dark")) {
                darkModeToggle.textContent = "â˜€ï¸ Light Mode";
                localStorage.setItem("theme", "dark");
            } else {
                darkModeToggle.textContent = "ðŸŒ™ Dark Mode";
                localStorage.setItem("theme", "light");
            }
        };

        // Load saved theme
        if (localStorage.getItem("theme") === "dark") {
            document.body.classList.add("dark");
            darkModeToggle.textContent = "â˜€ï¸ Light Mode";
        }

        // Set active navigation link
        document.addEventListener('DOMContentLoaded', function() {
            const currentPage = window.location.pathname.split('/').pop();
            const navLinks = document.querySelectorAll('nav a');
            
            navLinks.forEach(link => {
                const linkPage = link.getAttribute('href');
                if (linkPage === currentPage) {
                    link.classList.add('active');
                }
            });
        });

        // Function to update all price displays
        function updatePriceDisplays(price, previousPrice = null) {
            const priceElement = document.querySelector('.price');
            const tickerPrice = document.querySelector('.ticker-price');
            const tickerChange = document.querySelector('.ticker-change');
            
            // Remove loading state
            priceElement.classList.remove('loading');
            tickerPrice.classList.remove('loading');
            
            // Format price (silver is cheaper, so show more decimals)
            const formattedPrice = `$${price.toFixed(3)}`;
            
            // Update prices
            priceElement.textContent = `${formattedPrice} USD`;
            tickerPrice.textContent = formattedPrice;
            
            // Calculate and display change if we have previous price
            if (previousPrice) {
                const change = price - previousPrice;
                const changePercent = ((change / previousPrice) * 100).toFixed(2);
                
                if (change > 0) {
                    tickerChange.textContent = `+${change.toFixed(3)} (+${changePercent}%)`;
                    tickerChange.className = 'ticker-change positive';
                } else if (change < 0) {
                    tickerChange.textContent = `${change.toFixed(3)} (${changePercent}%)`;
                    tickerChange.className = 'ticker-change negative';
                } else {
                    tickerChange.textContent = `0.000 (0.00%)`;
                    tickerChange.className = 'ticker-change';
                }
            } else {
                tickerChange.textContent = 'Live';
                tickerChange.className = 'ticker-change';
            }
        }

        // Main function to fetch and update silver price
        async function updateSilverPrice() {
            try {
                let currentPrice;
                
                const basePrice = 24.50;
                const variation = (Math.random() - 0.5) * 0.1;
                currentPrice = basePrice + variation;
                
                const currentDisplay = document.querySelector('.ticker-price').textContent;
                const previousPrice = currentDisplay.includes('$') ? 
                    parseFloat(currentDisplay.replace('$', '')) : null;
                
                updatePriceDisplays(currentPrice, previousPrice);
                
            } catch (error) {
                console.error('Error updating silver price:', error);
                document.querySelector('.price').textContent = 'Live price unavailable';
                document.querySelector('.ticker-price').textContent = 'Unavailable';
            }
        }

        // Initialize and start updates
        updateSilverPrice();
        setInterval(updateSilverPrice, 30000);
    </script>
</body>

</html>
